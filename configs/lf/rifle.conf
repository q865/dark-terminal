# rifle.conf - A configuration file for the rifle file opener.
# This configuration is designed to work for both desktop and headless systems.

# --- General Rules ---

# Check if the file is a text file using the 'file' command and open it in less.
# This is a good fallback for unknown text-based formats.
mime ^text, has less, X!=,           label view = less -- "$@"
# If it's not text, it might be a binary or something else.
# On a headless server, we can't do much, so we inform the user.
!mime ^text, X!=,                      label view = echo "Not a text file."

# --- Desktop vs Headless Logic ---

# The 'X' condition checks if the $DISPLAY environment variable is set.
# If $DISPLAY is set, it means we are in a graphical environment.
# Use xdg-open for everything in a graphical environment.
# This is the preferred, desktop-agnostic way to open files.
# The 'ask' flag will prompt the user if multiple applications are available.
# -L flag follows symlinks
has xdg-open, X, label open = xdg-open -- "$@"

# --- Final Fallback ---
# If nothing else matches, just try to run the file.
# This is a fallback and might not always be what you want.
# else, true = echo "Could not find a suitable opener for $1"
