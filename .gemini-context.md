# Gemini Context for the dark-terminal Project

## 1. Project Goal

The main goal of `dark-terminal` is to provide a fast, one-command setup for a complete terminal development environment. It bundles and configures `kitty`, `tmux`, `AstroNvim`, `lf`, and `fzf` with a consistent Nord theme and sensible defaults.

## 2. Core Components & File Structure

-   `install.sh`: The main installation script. It detects the OS (Arch/Debian), installs dependencies, backs up existing configurations, and creates symbolic links.
-   `README.md`: The primary user-facing documentation. It should be kept up-to-date with any major changes.
-   `configs/`: Contains the configuration for all tools.
    -   `kitty/kitty.conf`: Terminal emulator settings.
    -   `tmux/tmux.conf`: Terminal multiplexer settings.
    -   `lf/lfrc`: File manager settings.
    -   `nvim/lua/user/init.lua`: **Crucial file.** This is the user configuration for AstroNvim (v4+). It defines which LSP servers and plugins are active.
-   `scripts/`: Contains helper scripts.
    -   `aliases.sh`: Sourced by the user's `.bashrc` or `.zshrc`. Defines common aliases and sets the `$EDITOR` variable.
    -   `fzf-launcher.sh`: Handles the logic for `fzf` searches (`Ctrl+f`, `Ctrl+p`).
    -   `preview.sh`: Used by `lf` to display file previews.

## 3. Important Technical Details

-   **AstroNvim Installation:** The `install.sh` script uses the official AstroNvim **template** (`AstroNvim/template`), not the main repository. This is the correct method for AstroNvim v4+. The user's custom configuration is then symlinked from `configs/nvim/lua/user` to `~/.config/nvim/lua/user`.

-   **`lf` Editor Integration Fix:** This is the most critical discovery. `lf` could not open files in `nvim` using a direct mapping (`map e $EDITOR $f`) or a hardcoded path. The solution was to force the command to run through a shell.
    -   **File:** `configs/lf/lfrc`
    -   **Correct mapping:** `map e $sh -c '$EDITOR "$1"' -- $f`
    -   **Reason:** This ensures that `lf` executes the editor in an environment that correctly resolves the `nvim` command, just like the user's interactive shell. Do not change this unless the underlying issue is resolved differently.

-   **Dependency Handling:** The `install.sh` script explicitly handles dependencies for `pacman` (Arch) and `apt` (Debian/Ubuntu).

## 4. My Role

Your role is to help maintain and extend this configuration. When asked to modify a tool's behavior, first identify the correct configuration file in the `configs/` or `scripts/` directory. Remember the critical `lf` fix and the AstroNvim setup method. Always aim to keep the configurations clean, modular, and well-documented in the `README.md`.
